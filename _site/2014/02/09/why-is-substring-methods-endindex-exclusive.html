<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
        Why is substring method's end index exclusive?
    </title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.3.0/pure-min.css" type="text/css">
    <link rel="stylesheet" href="/css/syntax.css" type="text/css">
    <link rel="stylesheet" href="/css/main.css" type="text/css">
    <link rel="stylesheet" href="/css/image.css" type="text/css">

</head>
<body>
    <div class="site">
        <div class="container pure-g-r">
            <div class="pure-u-1">
                <header class="title">
                    <h3>
                        <a href="/">ceilfors</a>
                    </h3>
                </header>
                <div class="content">
                    
<h1 class="post-title">Why is substring method's end index exclusive?</h1>
<span class="meta" style="color:grey">
09 Feb 2014 - 
Read time: 5 min.
</span>
<br />

<div class="post">
    <p>Imagine you have a string <code>s = &quot;01234&quot;</code>. You want to extract the substring of &quot;123&quot; from it.
The example of the string that I use here is simple as each of the characters represents its index.
That means to get the substring &quot;123&quot;, the start index is 1, and the end index is 3, right? Unfortunately,
this is wrong in most of programming languages out there. Let me exemplify:</p>

<table><thead>
<tr>
<th>Language</th>
<th>Code</th>
<th align="center">Output</th>
</tr>
</thead><tbody>
<tr>
<td>python</td>
<td>s[1:3]</td>
<td align="center">12</td>
</tr>
<tr>
<td>java</td>
<td>s.substring(1, 3);</td>
<td align="center">12</td>
</tr>
<tr>
<td>javascript</td>
<td>s.slice(1, 3)</td>
<td align="center">12</td>
</tr>
</tbody></table>

<p>Observe that we are getting &quot;12&quot; instead of &quot;123&quot;. The right end index is in fact 4.
Why is this strange behavior? This is because </p>

<blockquote>
<p>the substring method&#39;s end index is exclusive</p>
</blockquote>

<p>Without rationalization, our little brain just forgets this behavior.
I will rationalize this behavior thus remembering it will be easier.</p>

<h2>Made for real use cases</h2>

<p>There are two conventions being discussed to extract the substring of &quot;123&quot; (I will use only python
for shorter code starting from here). The two conventions are:</p>

<ol>
<li>s[1:4] # The working convention</li>
<li>s[1:3] # What we think is intuitive</li>
</ol>

<p>Clearly there are good reasons why the language creators preferred <em>Convention 1)</em>. </p>

<p>As a proposition, I will borrow some of the <a href="http://www.cs.utexas.edu/%7EEWD/transcriptions/EWD08xx/EWD831.html">argument from Djikstra</a>&#39;s essay
regarding <em>Why numbering should start at 0</em>, since they are reciprocal.</p>

<blockquote>
<p>the difference between the bounds as mentioned equals the length of the subsequence</p>
</blockquote>

<p>How is this related to our problem? Observe the following in <em>Convention 1)</em>:</p>

<ul>
<li>the difference between the start index and the end index is <strong>3</strong>. (4 - 1)</li>
<li>the length of the substring is <strong>3</strong>. (&quot;123&quot;)</li>
</ul>

<p>Yes, <em>the difference between the start index and end index equals to the length
of the substring</em>.</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="n">endIndex</span> <span class="o">-</span> <span class="n">startIndex</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">substring</span><span class="p">)</span>
</code></pre></div>
<p>To understand the value of this formula better, let&#39;s see how our code look like
with both of the conventions, given the use cases below.</p>

<table><thead>
<tr>
<th>Use case</th>
<th>Convention 1)</th>
<th>Convention 2)</th>
</tr>
</thead><tbody>
<tr>
<td>a) First x chars</td>
<td>s[0:0 + x]</td>
<td>s[0:0 + x - 1]</td>
</tr>
<tr>
<td>b) Last x chars</td>
<td>s[len(s) - x:len(s)]</td>
<td>s[len(s) - x:len(s) - 1]</td>
</tr>
<tr>
<td>c) Index x with length of y</td>
<td>s[x:x + y]</td>
<td>s[x:x + y - 1]</td>
</tr>
<tr>
<td>d) Index x to index of separator y</td>
<td>s[x:s.index(y)]</td>
<td>s[x:s.index(y) - 1]</td>
</tr>
<tr>
<td>e) Index x to index y</td>
<td>s[x:y + 1]</td>
<td>s[x:y]</td>
</tr>
</tbody></table>

<p>Observe that in the first four use cases, <em>Convention 2)</em> looks ugly. These common use
cases can be coded prettily with <em>Convention 1)</em>. Hence <em>Convention 1)</em>, which has an
exclusive end index, had been seen as a more <em>intuitive</em> way for slicing a string.
It is prettier to solve a more common use cases.</p>

<p>Now, if you have noticed, the last use case looks pretty with <em>Convention 2)</em>.
<em>Use case e)</em> is usually a problem that has been solved with human eyes and to be coded
into a program. This is actually the problem that has been given at the very beginning
of this post. We <em>already know</em> that we want to extract &quot;123&quot; before even we code them.
<strong>The caret index method</strong> will help you find the end index for this particular use case.</p>

<h2>The caret index method</h2>

<p>Finding the end index for a predetermined character is easy with the caret index method.
This method requires a simple tweak of the definition <em>index</em>. The index should be seen as
a <em>caret index</em>.</p>

<ul>
<li><em>Caret index</em> refers to the index of the caret position; <strong>not</strong> the index of the
character in the string.</li>
<li><em><a href="http://www.merriam-webster.com/dictionary/caret">Caret</a></em> <a href="http://en.wikipedia.org/wiki/Cursor_(computers)#Text_cursor">itself</a> refers to the flashing vertical line in a text editor
which indicates where a character will be placed when entered.</li>
</ul>

<p>Therefore:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="o">|</span><span class="mo">01234</span> <span class="c"># caret index 0</span>
<span class="mi">0</span><span class="o">|</span><span class="mi">1234</span> <span class="c"># caret index 1</span>
<span class="mo">0123</span><span class="o">|</span><span class="mi">4</span> <span class="c"># caret index 4</span>
<span class="mo">01234</span><span class="o">|</span> <span class="c"># caret index 5</span>
</code></pre></div>
<p>Going back to the initial problem, &quot;123&quot; will be extracted out like so:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="mi">0</span><span class="o">|</span><span class="mi">123</span><span class="o">|</span><span class="mi">4</span> <span class="c"># caret start index 1, caret end index 4</span>
</code></pre></div>
<h2>Bonus: Groovy gotcha</h2>

<p>Be careful when you are using Groovy. If you slice the string the Groovy way, you will get &quot;123&quot;:</p>
<div class="highlight"><pre><code class="groovy language-groovy" data-lang="groovy"><span class="n">s</span><span class="o">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="o">]</span>
</code></pre></div>
<p>I&#39;m not going to say that Groovy is <em>not</em> adhering <em>Convention 1)</em>. It is more like
a gotcha. The <code>1..3</code> represents a <em>range</em>, it is more intuitive if it includes 3 as you read it:
<em>1 until 3</em>. Do the following to make the end index exclusive:</p>
<div class="highlight"><pre><code class="groovy language-groovy" data-lang="groovy"><span class="n">s</span><span class="o">[</span><span class="mi">1</span><span class="o">..&lt;</span><span class="mi">3</span><span class="o">]</span>
</code></pre></div>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'ceilfors'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

                </div>
                <footer class="footer">
                    <span>Wisen Tanasa</span><br>
                    <a href="https://github.com/ceilfors">github.com/ceilfors</a><br>
                    <a href="https://twitter.com/ceilfors">twitter.com/ceilfors</a><br>
                </footer>
            </div>
        </div>
    </div>
    <script src="/js/matchmedia.js"></script>
    <script src="/js/picturefill.min.js"></script>    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-48262088-1', 'ceilfors.com');
      ga('send', 'pageview');

    </script>
</body>
</html>
